import{d as k,s as B,r as y,w as p,b as E,k as l,c as i,h as o,p as m,B as S,F as g,m as b,i as w,t as h,C as N,f as D,z as V,A as R}from"./index-C8i1NBWL.js";import{b as M}from"./userStore-u9qmRA6a.js";import{_ as A}from"./_plugin-vue_export-helper-x3n3nnut.js";const T=u=>(V("data-v-952bad0b"),u=u(),R(),u),G={class:"countersign-box"},O={class:"box"},q=T(()=>o("div",{class:"box-title"},"會簽人員",-1)),F={class:"box-content-Countersign"},P={class:"branch-group"},U=["id","value","onChange"],$=["for"],z={class:"person-group"},L=["id","value"],j=["for"],H=["disabled"],J=k({__name:"CountersignBox",emits:["handle-show-countersign-box","submit-countersign"],setup(u,{emit:v}){const _=M(),{baseStoreData:c}=B(_),r=v,e=y({showCountersignBox:1,disabledBtn:!1,personOptions:[],countersign:[],countersignValue:[]});p(()=>e.value.showCountersignBox,n=>{console.log("watch",n),r("handle-show-countersign-box",e.value.showCountersignBox)}),p(()=>e.value.countersign,n=>{console.log("watch",n),e.value.countersignValue=[];for(let s=0;s<n.length;s++)e.value.countersignValue.push(n[s].SIGNERNAME)});function f(n){const s=document.querySelector(".countersign-modal");n.target===s&&(e.value.showCountersignBox=0)}async function x(n,s){document.querySelectorAll(".branchs").forEach(t=>{t.value===s?t.checked=!0:t.checked=!1}),e.value.personOptions=c.value.allPersons.filter(t=>t.DeptId===n)}function C(){e.value.disabledBtn=!0,r("submit-countersign",e.value.countersign)}return(n,s)=>{const d=E("CaretRight");return l(),i("div",G,[o("div",{class:"countersign-modal",onClick:f},[o("div",O,[q,m(o("input",{class:"display",type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>e.value.countersignValue=t),disabled:""},null,512),[[S,e.value.countersignValue]]),o("div",F,[o("ul",P,[(l(!0),i(g,null,b(D(c).branchs,t=>(l(),i("li",{class:"branch",key:t.DeptId},[o("input",{class:"branchs",type:"checkbox",id:t.DeptId,name:"branchs",value:t.DeptName,onChange:a=>x(t.DeptId,t.DeptName)},null,40,U),w(d,{style:{width:"1em"}}),o("label",{for:t.DeptId,class:"branch-name"},h(t.DeptName),9,$),o("ul",z,[(l(!0),i(g,null,b(e.value.personOptions,a=>(l(),i("li",{class:"person",key:a.EmpId},[o("div",null,[m(o("input",{type:"checkbox",id:a.EmpId,name:"persons",value:{SIGNERNAME:a.EmpName,SIGNER:a.EmpId,order:a.Title[0]+a.Title[1]},"onUpdate:modelValue":s[1]||(s[1]=I=>e.value.countersign=I)},null,8,L),[[N,e.value.countersign]]),o("label",{for:a.EmpId},h(a.EmpName),9,j)])]))),128))])]))),128))])]),o("button",{type:"button",class:"btn btn-black",onClick:C,disabled:e.value.disabledBtn}," 確認 ",8,H),o("button",{type:"button",class:"btn btn-red",onClick:s[2]||(s[2]=t=>e.value.showCountersignBox=0)}," 取消 ")])])])}}}),X=A(J,[["__scopeId","data-v-952bad0b"]]);export{X as default};
