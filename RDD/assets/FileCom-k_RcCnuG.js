import{d as y,s as N,r as S,o as w,a as P,b as d,k as t,c as o,h as i,F as m,m as u,l as f,t as _,i as F,j as x,f as h,g as p}from"./index-C8i1NBWL.js";import{b as I,q as V,r as W,t as B}from"./userStore-u9qmRA6a.js";const E={class:"area noPrint"},R={class:"area-row"},G=i("div",{class:"area-title"},"附加文件：",-1),L={key:0,class:"file-list"},T={key:1,class:"file-list"},$=["onClick"],j=i("button",{class:"common download-btn"},"下載附件",-1),M=y({__name:"FileCom",props:{model:{type:String,default:"create"},toFileCom:{type:String,default:"Form"}},setup(l){const c=I(),{baseStoreData:C}=N(c),r=l,n=S({fileData:[]});w(()=>{if(r.model==="sign"){console.log("有進來拿file資料");const a=P();k(a.params.formId)}});function g(a){c.deleteFile(a)}async function k(a){await V({FileId:"",FileName:"",FilePath:"",WebName:r.toFileCom,WebID:a,ExecID:""}).then(async s=>{n.value.fileData=s.data,console.log("元件FileCom：",n.value.fileData)}).catch(s=>{console.log(s),W("API取原表單附件發生錯誤")})}return(a,s)=>{const v=d("DeleteFilled"),D=d("el-icon");return t(),o("div",E,[i("div",R,[G,l.model!=="sign"?(t(),o("div",L,[(t(!0),o(m,null,u(h(C).file,e=>(t(),o("p",{class:"file",key:e.name},[f(_(e.name)+" ",1),F(D,null,{default:x(()=>[F(v,{class:"delete",onClick:b=>g(e.name)},null,8,["onClick"])]),_:2},1024)]))),128))])):p("",!0),l.model==="sign"?(t(),o("div",T,[(t(!0),o(m,null,u(n.value.fileData,e=>(t(),o("a",{key:e.FileName,class:"downloadURL",onClick:b=>h(B)(e.FilePath)},[f(_(e.FileName)+" ",1),j],8,$))),128))])):p("",!0)])])}}});export{M as default};
